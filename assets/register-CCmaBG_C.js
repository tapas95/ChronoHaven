import{a as e,j as H,h as k,s as B,b as F,d as I}from"./alert-DMWuZ5g4.js";/* empty css                       */import{t as v}from"./togglePasswordVisibility-DyESKLue.js";const d=document.getElementById("registerForm"),h=document.getElementById("firstName"),p=document.getElementById("lastName"),n=document.getElementById("email"),a=document.getElementById("phone"),E=document.getElementById("male"),A=document.getElementById("female"),T=document.getElementById("other"),m=document.getElementById("password"),u=document.getElementById("confirmPassword"),w=document.getElementById("agreeCheck"),l=document.getElementById("submitRegister"),N=[h,p,n,a,E,A,T,m,u,w],c=document.getElementById("loginBtn"),Y=new URLSearchParams(window.location.search),f=Y.get("redirect"),C=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,S=/^[0-9]{10}$/;if(c){const r=c.getAttribute("href");f?c.setAttribute("href",`${r}?redirect=${f}`):c.setAttribute("href",`${r}`)}n.addEventListener("input",()=>n.value=n.value.toLowerCase());a.addEventListener("input",()=>a.value=a.value.replace(/\D/g,""));v("passwordVisibility","password");v("confirmPasswordVisibility","confirmPassword");N.forEach(r=>{r.addEventListener("input",()=>{const s=r.closest(":is( .form-group, .form-check )").querySelector(".alert");s&&s.remove()})});d.addEventListener("submit",async r=>{r.preventDefault();const s=h.value.trim(),y=p.value.trim(),o=n.value.trim().toLowerCase(),g=a.value.trim(),b=E.checked,P=A.checked,M=T.checked,i=m.value.trim(),L=u.value.trim(),j=w.checked;if(document.querySelectorAll(".alert").forEach(t=>t.remove()),!s)return h.insertAdjacentHTML("afterend",e("Please Enter Your First Name"));if(!y)return p.insertAdjacentHTML("afterend",e("Please Enter Your Last Name"));if(!o)return n.insertAdjacentHTML("afterend",e("Please Enter Your Email"));if(!C.test(o))return n.insertAdjacentHTML("afterend",e("Please enter your email in the correct format (e.g., name@example.com)."));if(!g)return a.insertAdjacentHTML("afterend",e("Please Enter Your Phone Number"));if(!S.test(g))return a.insertAdjacentHTML("afterend",e("Phone number must be 10 digits"));if(!b&&!P&&!M)return E.parentElement.parentElement.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Please Select Your Gender"));if(!i)return m.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Please Enter a Password"));if(i.length<6)return m.parentElement.parentElement.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Password must be at least 6 characters long"));if(!L)return u.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Please Confirm Your Password"));if(i!==L)return u.parentElement.parentElement.parentElement.insertAdjacentHTML("afterend",e("Password and Confirm Password must be same."));if(!j)return w.parentElement.parentElement.insertAdjacentHTML("beforeend",e("You must agree to the Terms and Privacy Policy"));try{l.disabled=!0,l.insertAdjacentHTML("beforeend",'<div class="spinner-border spinner-border-sm text-light" role="status"><span class="visually-hidden">Loading...</span></div>');const t=await H(k,o,i);await B(F(I,"users",t.user.uid),{firstName:s,lastName:y,email:o,phone:g,gender:b?"Male":P?"Female":"Other"}),d.innerHTML=e("Your account has been created successfully! You can now log in using your email and password.","success"),setTimeout(()=>{f?window.location.href=`./login.html?redirect=${f}`:window.location.href="./login.html"},1e3)}catch(t){switch(t.code){case"auth/email-already-in-use":n.insertAdjacentHTML("afterend",e("This email is already registered. Please use a different email or try logging in instead."));break;case"auth/network-request-failed":d.insertAdjacentHTML("beforeend",e("Network error: Please check your internet connection and try again.","danger","mt-4"));break;default:d.insertAdjacentHTML("beforeend",e("Something went wrong. Please try again later.","danger","mt-4"));break}}finally{l.disabled=!1;const t=l.querySelector(".spinner-border");t&&t.remove()}});
