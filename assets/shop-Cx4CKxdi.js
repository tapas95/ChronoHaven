import{c as C,d as E,g as w,q as k,w as g}from"./firebase-config-t6koYE1i.js";import"./header-6RkX87UG.js";import{r as v,a as T,S as q}from"./productCardSkeleton-C22IvLv4.js";import{d as f}from"./alert-CO0lNkg5.js";const P=(r,o)=>{const e=typeof r=="string"?document.querySelector(r):r;if(!e)return;const n=()=>`
        <span class="placeholder col-5 d-block rounded-32" style="height: 2.5rem;"></span>
    `,t=document.createElement("li");t.className="w-100 d-flex gap-2 flex-wrap mb-0",t.id="categorySkeletonContainer";for(let a=0;a<o;a++)t.insertAdjacentHTML("beforeend",n());e.appendChild(t)},j=async r=>{P(r,5);try{const o=C(E,"collections","categories","items"),e=await w(o);if(e.empty){r.insertAdjacentHTML("beforeend",f("No Categories Found.","danger"));return}e.forEach(n=>{const t=n.data();r.insertAdjacentHTML("beforeend",`
                <li class="mb-0">
                    <label for="${t.id}" class="px-3 py-2 border rounded-32 transition-3 cursor-pointer">
                        <input type="checkbox" id="${t.id}" name="${t.id}" data-category="${t.name}" class="category-checkbox d-none" />
                        <span class="d-block">${t.name}</span>
                    </label>
                </li>
            `)})}catch(o){console.log(o)}finally{const o=document.getElementById("categorySkeletonContainer");o&&o.remove()}},s=document.getElementById("productsContainer"),m=document.getElementById("categoriesContainer"),A=document.querySelectorAll("#pricesFilterContainer .price-checkbox"),y=async(r=null,o=null)=>{s.innerHTML="",v(s,9);try{let e=C(E,"collections","products","items");if(r&&r.length>0&&(e=k(e,g("category","in",r))),o){const[t,a]=o;e=k(e,g("price",">=",t),g("price","<=",a))}const n=await w(e);if(n.empty){s.insertAdjacentHTML("beforeend",f("No Products Found.","danger"));return}n.forEach(t=>{const a=t.data();s.insertAdjacentHTML("beforeend",T(a))}),requestAnimationFrame(()=>{const t=document.querySelectorAll(".variant-images"),a=document.querySelectorAll(".product-title");t.forEach((h,b)=>{var S;new q(h,{perPage:1,arrows:!1,pagination:!0,drag:!1}).mount();const d=(S=n.docs[b])==null?void 0:S.data();if(!d||!d.variants)return;const L=h.querySelectorAll(".splide__pagination__page");d.variants.forEach((c,x)=>{const i=L[x];if(!i||!c.colors)return;const $=c.colors.map(l=>c.colors.length>1?`${l} ${100/c.colors.length}%`:l).join(", ");i.style.cssText=`
                        --variant-base-color: ${c.colors[0]};
                        background-image: linear-gradient( -45deg, ${$} );
                        box-shadow: 0 0 0 0.125rem ${c.colors[0]};
                    `,i.setAttribute("data-variant-id",`${c.id}`),i.addEventListener("click",()=>{const l=c.id,u=a[b];if(!u)return;const p=new URL(u.href,window.location.origin);p.searchParams.delete("variantId"),p.searchParams.append("variantId",l),u.href=p.toString()})})})})}catch(e){console.log(e),s.insertAdjacentHTML("beforeend",f("Error Loading Products.","danger"))}finally{const e=document.getElementById("productCardSkeleton");e&&e.remove()}};y();m&&j(m).then(()=>{const r=m.querySelectorAll("input.category-checkbox");r.forEach(o=>{o.addEventListener("change",e=>{e.preventDefault(),o.getAttribute("data-category");const n=Array.from(r).filter(t=>t.checked).map(t=>t.getAttribute("data-category"));o.checked?o.parentElement.classList.add("bg-primary","text-white"):o.parentElement.classList.remove("bg-primary","text-white"),n.length===0?y(null):y(n)})})});A&&A.forEach(r=>{r.addEventListener("change",o=>{o.preventDefault();const e=r.getAttribute("data-price").split("-");r.checked,console.log(e)})});
