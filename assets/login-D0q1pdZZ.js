import{a as n,s as u,b as m,G as g,e as f,f as w,d as p,h,i as y}from"./alert-CGnHWstA.js";/* empty css                       */import{t as b}from"./togglePasswordVisibility-CFsXdpQZ.js";const r=document.getElementById("loginForm"),o=document.getElementById("email"),l=document.getElementById("password"),d=document.getElementById("submitLogin");b("passwordVisibility","password");r.addEventListener("submit",async t=>{t.preventDefault(),document.querySelectorAll(".alert").forEach(a=>a.remove());const e=o.value.trim(),s=l.value.trim();if(!e)return o.insertAdjacentHTML("afterend",n("Please Enter Email Address"));if(!s)return l.parentElement.insertAdjacentHTML("afterend",n("Please Enter Password"));d.disabled=!0;try{const a=await u(m,e,s);r.innerHTML=n("Signed in successfully. Redirecting now.","success"),setTimeout(()=>{window.location.href="./"},1e3)}catch(a){switch(a.code){case"auth/invalid-credential":r.insertAdjacentHTML("afterbegin",n("Invalid Email or Password","danger","mb-3"));break;case"auth/network-request-failed":r.insertAdjacentHTML("afterbegin",n("Network error: Please check your internet connection and try again.","danger","mb-3"));break}}finally{d.disabled=!1}});const c=document.getElementById("loginWithGoogle"),E=new g;c&&c.addEventListener("click",async()=>{try{const e=(await f(m,E)).user,s=w(p,"users",e.uid);if(!(await h(s)).exists()){const i=(e.displayName||"Guest").split(" ");await y(s,{firstName:i[0],lastName:i[1],email:e.email,phone:e.phoneNumber||null,avatar:e.photoURL,gender:"Other"})}window.location.href="./"}catch(t){console.error("‚ùå Google login failed:",t.code,t.message),alert("Google login failed: "+t.message)}});
