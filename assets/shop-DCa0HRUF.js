import{c as f,d as y,g as h,q as C,w as A}from"./firebase-config-t6koYE1i.js";import"./header-6RkX87UG.js";import{r as E,a as w,S as L}from"./productCardSkeleton-CTUBxRrG.js";import{d}from"./alert-CO0lNkg5.js";const x=(o,e)=>{const r=typeof o=="string"?document.querySelector(o):o;if(!r)return;const n=()=>`
        <span class="placeholder col-5 d-block rounded-32" style="height: 2.5rem;"></span>
    `,t=document.createElement("li");t.className="w-100 d-flex gap-2 flex-wrap mb-0",t.id="categorySkeletonContainer";for(let s=0;s<e;s++)t.insertAdjacentHTML("beforeend",n());r.appendChild(t)},$=async o=>{x(o,5);try{const e=f(y,"collections","categories","items"),r=await h(e);if(r.empty){o.insertAdjacentHTML("beforeend",d("No Categories Found.","danger"));return}r.forEach(n=>{const t=n.data();o.insertAdjacentHTML("beforeend",`
                <li class="mb-0">
                    <label for="${t.id}" class="px-3 py-2 border rounded-32 transition-3 cursor-pointer">
                        <input type="checkbox" id="${t.id}" name="${t.id}" data-category="${t.name}" class="category-checkbox d-none" />
                        <span class="d-block">${t.name}</span>
                    </label>
                </li>
            `)})}catch(e){console.log(e)}finally{const e=document.getElementById("categorySkeletonContainer");e&&e.remove()}},c=document.getElementById("productsContainer"),l=document.getElementById("categoriesContainer"),g=async(o=null)=>{c.innerHTML="",E(c,9);try{let e=f(y,"collections","products","items");o&&o.length>0&&(e=C(e,A("category","in",o)));const r=await h(e);if(r.empty){c.insertAdjacentHTML("beforeend",d("No Products Found.","danger"));return}r.forEach(n=>{const t=n.data();c.insertAdjacentHTML("beforeend",w(t))}),requestAnimationFrame(()=>{document.querySelectorAll(".variant-images").forEach((t,s)=>{var p;new L(t,{perPage:1,arrows:!1,pagination:!0,drag:!1}).mount();const i=(p=r.docs[s])==null?void 0:p.data();if(!i||!i.variants)return;const b=t.querySelectorAll(".splide__pagination__page");i.variants.forEach((a,S)=>{const u=b[S];if(!u||!a.colors)return;const k=a.colors.map(m=>a.colors.length>1?`${m} ${100/a.colors.length}%`:m).join(", ");u.style.cssText=`
                        --variant-base-color: ${a.colors[0]};
                        background-image: linear-gradient( -45deg, ${k} );
                        box-shadow: 0 0 0 0.125rem ${a.colors[0]};
                    `})})})}catch(e){console.log(e),c.insertAdjacentHTML("beforeend",d("Error Loading Products.","danger"))}finally{const e=document.getElementById("productCardSkeleton");e&&e.remove()}};g();l&&$(l).then(()=>{const o=l.querySelectorAll("input.category-checkbox");o.forEach(e=>{e.addEventListener("change",r=>{r.preventDefault(),e.getAttribute("data-category");const n=Array.from(o).filter(t=>t.checked).map(t=>t.getAttribute("data-category"));e.checked?e.parentElement.classList.add("bg-primary","text-white"):e.parentElement.classList.remove("bg-primary","text-white"),n.length===0?g(null):g(n)})})});
