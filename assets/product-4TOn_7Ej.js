import{c as V,d as Q,q as O,w as W,g as z,a as $,i as U,l as G}from"./alert-Cs6ilAHU.js";import{r as J,a as K,S}from"./productCardSkeleton-Dcmh8ECa.js";const X=async(t,s,c)=>{J(c,3);try{const r=V(Q,"collections","products","items"),a=O(r,W("category","==",s)),l=await z(a);if(l.empty){c.insertAdjacentHTML("beforeend",$("No Products Found.","danger"));return}const e=[];l.forEach(n=>{const o=n.data();o.id!==t&&(e.push(o),c.insertAdjacentHTML("beforeend",K(o)))}),e.length===0&&c.insertAdjacentHTML("beforeend",$("No related products found.","danger","bi-exclamation-diamond-fill","mx-2")),requestAnimationFrame(()=>{document.querySelectorAll(".variant-images").forEach((o,p)=>{new S(o,{perPage:1,arrows:!1,pagination:!0,drag:!1}).mount();const u=e[p];if(!u||!u.variants)return;const y=o.querySelectorAll(".splide__pagination__page");u.variants.forEach((d,v)=>{const f=y[v];if(!f||!d.colors)return;const L=d.colors.map(x=>d.colors.length>1?`${x} ${100/d.colors.length}%`:x).join(", ");f.style.cssText=`
                        --variant-base-color: ${d.colors[0]};
                        background-image: linear-gradient( -45deg, ${L} );
                        box-shadow: 0 0 0 0.125rem ${d.colors[0]};
                    `})})})}catch(r){console.log(r),c.insertAdjacentHTML("beforeend",$("Error Loading Products.","danger"))}finally{const r=document.getElementById("productCardSkeleton");r&&r.remove()}};let P=null,k=null;const T=(t,s)=>{t!=null&&t.splide&&t.splide.destroy(!0),s!=null&&s.splide&&s.splide.destroy(!0),k=new S(s,{fixedWidth:100,height:100,gap:12,pagination:!1,arrows:!1,isNavigation:!0}),P=new S(t,{pagination:!1,arrows:!1}),P.sync(k),P.mount(),k.mount()},Y=t=>{var c;const s=document.createElement("ul");return s.classList.add("varients","list-inline","d-flex","align-items-center","gap-3","mt-0"),(c=t.variants)==null||c.forEach(r=>{var l;const a=`
            <li class="mb-0">
                <button class="varient-button d-block rounded-circle transition-3" style="--variant-base-color: ${r.colors[0]};background-image: linear-gradient( -135deg, ${(l=r.colors)==null?void 0:l.map(e=>r.colors.length>1?`${e} ${100/r.colors.length}%`:`${e}`).join(", ")} );box-shadow: 0 0 0 0.125rem ${r.colors[0]};" data-varient-id="${r.id}"></button>
            </li>
        `;s.insertAdjacentHTML("beforeend",a)}),s},Z=(t,s,c,r=10)=>{const a=r===0?0:1,l=()=>{let n=parseInt(t.value)||1;(isNaN(n)||n<a)&&(n=a),n>r&&(n=r),t.value=n,e(n)},e=n=>{s.disabled=n>=r,c.disabled=n<=a};t.addEventListener("input",()=>t.value=t.value.replace(/[^0-9]/g,"")),t.addEventListener("blur",l),t.addEventListener("change",()=>{let n=parseInt(t.value)||a;e(n)}),s.addEventListener("click",n=>{n.preventDefault();let o=parseInt(t.value)||a;o<r&&o++,t.value=o,e(o)}),c.addEventListener("click",n=>{n.preventDefault();let o=parseInt(t.value)||a;o>a&&o--,t.value=o,e(o)}),l()},w=document.getElementById("productCategory"),M=document.querySelector("#productImageWrapper .splide__list"),B=document.querySelector(".product-variant-slider"),A=document.querySelector(".product-variant-thumbnail-slider"),H=document.querySelector(".product-variant-thumbnail-slider .splide__list"),D=document.getElementById("productName"),j=document.getElementById("productShortDescription"),_=document.getElementById("productRating"),N=document.getElementById("variantsContainer"),R=document.getElementById("productDetailedDescription"),F=document.getElementById("selectedProductName"),b=document.getElementById("selectedProductImg"),E=document.getElementById("selectedProductColor"),I=document.getElementById("selectedProductQuantity"),m=document.querySelector("#quantity #quantityInput"),q=document.querySelector("#quantity #plus"),C=document.querySelector("#quantity #minus"),g=document.getElementById("stock"),h=document.getElementById("totalPrice"),ee=document.getElementById("relatedProducts"),te=async()=>{var r;const s=new URLSearchParams(window.location.search).get("id");let c=parseInt(m.value)||1;try{const a=U(Q,"collections","products","items",s),l=await G(a);if(l.exists()){const e=l.data();let n=e.variants[0].id;document.title=`Product | ${e.name}`,w&&(w.textContent=e.category),D&&(D.textContent=e.name),j&&(j.textContent=e.shortDescription),_&&(_.textContent=`${e.rating} Ratings`),N&&N.append(Y(e));const o=document.querySelectorAll(".varient-button");if(e.variants.length>0&&e.variants[0].images.length>0){const i=(r=e.variants[0].images)==null?void 0:r.map(u=>`
                    <li class="splide__slide mb-0">
                        <img src="${u}" alt="${e.name}" class="d-block img-fluid mx-auto" />
                    </li>
                `).join("");M.innerHTML=i,H.innerHTML=i}requestAnimationFrame(()=>T(B,A)),o.length>0&&o[0].classList.add("active"),o==null||o.forEach(i=>{i.addEventListener("click",()=>{var y;o.forEach(d=>d.classList.remove("active")),i.classList.add("active");const u=i.getAttribute("data-varient-id");n!==u&&(n=u,(y=e.variants)==null||y.forEach(d=>{var v;if(d.id===u){const f=(v=d.images)==null?void 0:v.map(L=>`<li class="splide__slide mb-0"><img src="${L}" alt="${e.name}" class="d-block img-fluid mx-auto" /></li>`).join("");M.innerHTML=f,H.innerHTML=f,requestAnimationFrame(()=>T(B,A)),b&&(b.innerHTML=`<img src="${d.images[0]}" alt="${e.name}" class="d-block img-fluid mx-auto" /> `),E&&(E.innerHTML=`<span class="current-variant-color d-block rounded-circle" style="background-color: ${d.colors[0]};"></span>`)}}))})}),R&&R.insertAdjacentHTML("beforeend",`
                <p>${e.detailedDescription}</p>
                <ul class="list-inline">
                    ${Object.keys(e.specifications).map(i=>`
                            <li class="d-flex align-items-center gap-2">
                                <span class="d-block">${i}: </span>
                                <span class="d-block fw-semibold">${e.specifications[i]}</span>
                            </li>
                        `).join("")}
                </ul>
            `),e.variants.forEach(i=>{i.id===n&&(b&&(b.innerHTML=`<img src="${i.images[0]}" alt="${e.name}" class="d-block img-fluid mx-auto" /> `),E&&(E.innerHTML=`<span class="current-variant-color d-block rounded-circle" style="background-color: ${i.colors[0]};"></span>`))}),F&&(F.textContent=e.name),I&&(I.textContent=c),Z(m,q,C,e.inStock),e.inStock===0&&(m.value=0,m.disabled=!0,q.disabled=!0,C.disabled=!0,g&&(g.textContent="Out of Stock"));const p=()=>{if(c=parseInt(m.value)||0,c>e.inStock&&(c=e.inStock,m.value=c),e.inStock===0){h&&(h.textContent="₹ 0.00"),g&&(g.textContent="Out of Stock");return}h&&(h.textContent=`₹ ${parseInt(e.price.current)*c}.00`),g&&(g.textContent=e.inStock-c),I&&(I.textContent=c)};p(),m.addEventListener("input",p),m.addEventListener("blur",p),m.addEventListener("change",p),q.addEventListener("click",p),C.addEventListener("click",p),X(e.id,e.category,ee)}else console.log("No such Product Found!")}catch(a){console.log(a)}};te();
