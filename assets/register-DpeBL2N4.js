import{a as e,j as A,f as M,k as j,b as H,d as k}from"./alert-DvSpgCR0.js";/* empty css                       */import{t as P}from"./togglePasswordVisibility-CFsXdpQZ.js";const o=document.getElementById("registerForm"),f=document.getElementById("firstName"),g=document.getElementById("lastName"),n=document.getElementById("email"),a=document.getElementById("phone"),b=document.getElementById("male"),L=document.getElementById("female"),v=document.getElementById("other"),d=document.getElementById("password"),m=document.getElementById("confirmPassword"),p=document.getElementById("agreeCheck"),l=document.getElementById("submitRegister"),F=[f,g,n,a,b,L,v,d,m,p],B=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,I=/^[0-9]{10}$/;n.addEventListener("input",()=>n.value=n.value.toLowerCase());a.addEventListener("input",()=>a.value=a.value.replace(/\D/g,""));P("passwordVisibility","password");P("confirmPasswordVisibility","confirmPassword");F.forEach(i=>{i.addEventListener("input",()=>{const r=i.closest(":is( .form-group, .form-check )").querySelector(".alert");r&&r.remove()})});o.addEventListener("submit",async i=>{i.preventDefault();const r=f.value.trim(),E=g.value.trim(),c=n.value.trim().toLowerCase(),u=a.value.trim(),h=b.checked,y=L.checked,T=v.checked,s=d.value.trim(),w=m.value.trim(),x=p.checked;if(document.querySelectorAll(".alert").forEach(t=>t.remove()),!r)return f.insertAdjacentHTML("afterend",e("Please Enter Your First Name","danger","bi-exclamation-diamond-fill"));if(!E)return g.insertAdjacentHTML("afterend",e("Please Enter Your Last Name","danger","bi-exclamation-diamond-fill"));if(!c)return n.insertAdjacentHTML("afterend",e("Please Enter Your Email","danger","bi-exclamation-diamond-fill"));if(!B.test(c))return n.insertAdjacentHTML("afterend",e("Please enter your email in the correct format (e.g., name@example.com).","danger","bi-exclamation-diamond-fill"));if(!u)return a.insertAdjacentHTML("afterend",e("Please Enter Your Phone Number","danger","bi-exclamation-diamond-fill"));if(!I.test(u))return a.insertAdjacentHTML("afterend",e("Phone number must be 10 digits","danger","bi-exclamation-diamond-fill"));if(!h&&!y&&!T)return b.parentElement.parentElement.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Please Select Your Gender","danger","bi-exclamation-diamond-fill"));if(!s)return d.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Please Enter a Password","danger","bi-exclamation-diamond-fill"));if(s.length<6)return d.parentElement.parentElement.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Password must be at least 6 characters long","danger","bi-exclamation-diamond-fill"));if(!w)return m.parentElement.parentElement.insertAdjacentHTML("beforeend",e("Please Confirm Your Password","danger","bi-exclamation-diamond-fill"));if(s!==w)return m.parentElement.parentElement.parentElement.insertAdjacentHTML("afterend",e("Password and Confirm Password must be same.","danger","bi-exclamation-diamond-fill"));if(!x)return p.parentElement.parentElement.insertAdjacentHTML("beforeend",e("You must agree to the Terms and Privacy Policy","danger","bi-exclamation-diamond-fill"));try{l.disabled=!0,l.insertAdjacentHTML("beforeend",'<div class="spinner-border spinner-border-sm text-light" role="status"><span class="visually-hidden">Loading...</span></div>');const t=await A(M,c,s);await j(H(k,"users",t.user.uid),{firstName:r,lastName:E,phone:u,gender:h?"Male":y?"Female":"Other"}),o.innerHTML=e("Your account has been created successfully! You can now log in using your email and password.","success","bi-check-circle-fill"),setTimeout(()=>window.location.href="./login.html",1e3)}catch(t){switch(t.code){case"auth/email-already-in-use":n.insertAdjacentHTML("afterend",e("This email is already registered. Please use a different email or try logging in instead.","danger","bi-exclamation-diamond-fill"));break;case"auth/network-request-failed":o.insertAdjacentHTML("beforeend",e("Network error: Please check your internet connection and try again.","danger","bi-exclamation-diamond-fill","mt-4"));break;default:o.insertAdjacentHTML("beforeend",e("Something went wrong. Please try again later.","danger","bi-exclamation-diamond-fill","mt-4"));break}}finally{l.disabled=!1;const t=l.querySelector(".spinner-border");t&&t.remove()}});
