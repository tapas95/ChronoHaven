import{c as A,d as C,g as E,q as k,w as g}from"./firebase-config-t6koYE1i.js";import"./header-C-Elrbao.js";import{r as $,a as T,S as q}from"./productCardSkeleton-C22IvLv4.js";import{d as f}from"./alert-CO0lNkg5.js";const v=(r,o)=>{const t=typeof r=="string"?document.querySelector(r):r;if(!t)return;const n=()=>`
        <span class="placeholder col-5 d-block rounded-32" style="height: 2.5rem;"></span>
    `,e=document.createElement("li");e.className="w-100 d-flex gap-2 flex-wrap mb-0",e.id="categorySkeletonContainer";for(let a=0;a<o;a++)e.insertAdjacentHTML("beforeend",n());t.appendChild(e)},P=async r=>{v(r,5);try{const o=A(C,"collections","categories","items"),t=await E(o);if(t.empty){r.insertAdjacentHTML("beforeend",f("No Categories Found.","danger"));return}t.forEach(n=>{const e=n.data();r.insertAdjacentHTML("beforeend",`
                <li class="mb-0">
                    <label for="${e.id}" class="px-3 py-2 border rounded-32 transition-3 cursor-pointer">
                        <input type="checkbox" id="${e.id}" name="${e.id}" data-category="${e.name}" class="category-checkbox d-none" />
                        <span class="d-block">${e.name}</span>
                    </label>
                </li>
            `)})}catch(o){console.log(o)}finally{const o=document.getElementById("categorySkeletonContainer");o&&o.remove()}},s=document.getElementById("productsContainer"),m=document.getElementById("categoriesContainer"),y=async(r=null,o=null)=>{s.innerHTML="",$(s,9);try{let t=A(C,"collections","products","items");if(r&&r.length>0&&(t=k(t,g("category","in",r))),o){const[e,a]=o;t=k(t,g("price",">=",e),g("price","<=",a))}const n=await E(t);if(n.empty){s.insertAdjacentHTML("beforeend",f("No Products Found.","danger"));return}n.forEach(e=>{const a=e.data();s.insertAdjacentHTML("beforeend",T(a))}),requestAnimationFrame(()=>{const e=document.querySelectorAll(".variant-images"),a=document.querySelectorAll(".product-title");e.forEach((h,b)=>{var S;new q(h,{perPage:1,arrows:!1,pagination:!0,drag:!1}).mount();const l=(S=n.docs[b])==null?void 0:S.data();if(!l||!l.variants)return;const w=h.querySelectorAll(".splide__pagination__page");l.variants.forEach((c,L)=>{const i=w[L];if(!i||!c.colors)return;const x=c.colors.map(d=>c.colors.length>1?`${d} ${100/c.colors.length}%`:d).join(", ");i.style.cssText=`
                        --variant-base-color: ${c.colors[0]};
                        background-image: linear-gradient( -45deg, ${x} );
                        box-shadow: 0 0 0 0.125rem ${c.colors[0]};
                    `,i.setAttribute("data-variant-id",`${c.id}`),i.addEventListener("click",()=>{const d=c.id,u=a[b];if(!u)return;const p=new URL(u.href,window.location.origin);p.searchParams.delete("variantId"),p.searchParams.append("variantId",d),u.href=p.toString()})})})})}catch(t){console.log(t),s.insertAdjacentHTML("beforeend",f("Error Loading Products.","danger"))}finally{const t=document.getElementById("productCardSkeleton");t&&t.remove()}};y();m&&P(m).then(()=>{const r=m.querySelectorAll("input.category-checkbox");r.forEach(o=>{o.addEventListener("change",t=>{t.preventDefault(),o.getAttribute("data-category");const n=Array.from(r).filter(e=>e.checked).map(e=>e.getAttribute("data-category"));o.checked?o.parentElement.classList.add("bg-primary","text-white"):o.parentElement.classList.remove("bg-primary","text-white"),n.length===0?y(null):y(n)})})});
