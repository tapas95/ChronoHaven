import{s as u,a as m,G as g,b as f,e as p,d as w,f as b,h}from"./firebase-config-DD6-ao-H.js";/* empty css                       */import{d as n}from"./alert-CO0lNkg5.js";import{t as y}from"./togglePasswordVisibility-CFsXdpQZ.js";const s=document.getElementById("loginForm"),r=document.getElementById("email"),l=document.getElementById("password"),d=document.getElementById("submitLogin");y("passwordVisibility","password");s.addEventListener("submit",async t=>{t.preventDefault(),document.querySelectorAll(".alert").forEach(i=>i.remove());const e=r.value.trim(),a=l.value.trim();if(!e)return r.insertAdjacentHTML("afterend",n("Please Enter Email Address","danger","bi-exclamation-diamond-fill"));if(!a)return l.parentElement.insertAdjacentHTML("afterend",n("Please Enter Password","danger","bi-exclamation-diamond-fill"));d.disabled=!0;try{const i=await u(m,e,a);s.innerHTML=n("Signed in successfully. Redirecting now.","success","bi-check-circle-fill"),setTimeout(()=>{window.location.href="./"},1e3)}catch(i){switch(i.code){case"auth/invalid-credential":s.insertAdjacentHTML("afterbegin",n("Invalid Email or Password","danger","bi-exclamation-diamond-fill","mb-3"));break;case"auth/network-request-failed":s.insertAdjacentHTML("afterbegin",n("Network error: Please check your internet connection and try again.","danger","bi-exclamation-diamond-fill","mb-3"));break}}finally{d.disabled=!1}});const c=document.getElementById("loginWithGoogle"),E=new g;c&&c.addEventListener("click",async()=>{try{const e=(await f(m,E)).user,a=p(w,"users",e.uid);if(!(await b(a)).exists()){const o=(e.displayName||"Guest").split(" ");await h(a,{firstName:o[0],lastName:o[1],email:e.email,phone:e.phoneNumber||null,avatar:e.photoURL,gender:"Other"})}window.location.href="./"}catch(t){console.error("‚ùå Google login failed:",t.code,t.message),alert("Google login failed: "+t.message)}});
