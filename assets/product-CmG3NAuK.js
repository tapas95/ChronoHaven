import{c as B,d as _,q as H,w as M,g as R,a as f,i as N,l as F}from"./alert-CnmhpMoD.js";import{r as V,a as W,S as b}from"./productCardSkeleton-BUBmJzn7.js";const z=async(s,n,r)=>{V(r,3);try{const e=B(_,"collections","products","items"),u=H(e,M("category","==",n)),t=await R(u);if(t.empty){r.insertAdjacentHTML("beforeend",f("No Products Found.","danger"));return}const a=[];t.forEach(c=>{const o=c.data();o.id!==s&&(a.push(o),r.insertAdjacentHTML("beforeend",W(o)))}),a.length===0&&r.insertAdjacentHTML("beforeend",f("No related products found.","danger","bi-exclamation-diamond-fill","mx-2")),requestAnimationFrame(()=>{document.querySelectorAll(".variant-images").forEach((o,l)=>{new b(o,{perPage:1,arrows:!1,pagination:!0,drag:!1}).mount();const d=a[l];if(!d||!d.variants)return;const p=o.querySelectorAll(".splide__pagination__page");d.variants.forEach((i,g)=>{const v=p[g];if(!v||!i.colors)return;const D=i.colors.map($=>i.colors.length>1?`${$} ${100/i.colors.length}%`:$).join(", ");v.style.cssText=`
                        --variant-base-color: ${i.colors[0]};
                        background-image: linear-gradient( -45deg, ${D} );
                        box-shadow: 0 0 0 0.125rem ${i.colors[0]};
                    `})})})}catch(e){console.log(e),r.insertAdjacentHTML("beforeend",f("Error Loading Products.","danger"))}finally{const e=document.getElementById("productCardSkeleton");e&&e.remove()}};let y=null,h=null;const E=(s,n)=>{s!=null&&s.splide&&s.splide.destroy(!0),n!=null&&n.splide&&n.splide.destroy(!0),h=new b(n,{fixedWidth:100,height:100,gap:12,pagination:!1,arrows:!1,isNavigation:!0}),y=new b(s,{pagination:!1,arrows:!1}),y.sync(h),y.mount(),h.mount()},O=s=>{var r;const n=document.createElement("ul");return n.classList.add("varients","list-inline","d-flex","align-items-center","gap-3","mt-0"),(r=s.variants)==null||r.forEach(e=>{var t;const u=`
            <li class="mb-0">
                <button class="varient-button d-block rounded-circle transition-3" style="--variant-base-color: ${e.colors[0]};background-image: linear-gradient( -135deg, ${(t=e.colors)==null?void 0:t.map(a=>e.colors.length>1?`${a} ${100/e.colors.length}%`:`${a}`).join(", ")} );box-shadow: 0 0 0 0.125rem ${e.colors[0]};" data-varient-id="${e.id}"></button>
            </li>
        `;n.insertAdjacentHTML("beforeend",u)}),n},I=document.getElementById("productCategory"),P=document.querySelector("#productImageWrapper .splide__list"),x=document.querySelector(".product-variant-slider"),L=document.querySelector(".product-variant-thumbnail-slider"),w=document.querySelector(".product-variant-thumbnail-slider .splide__list"),C=document.getElementById("productName"),S=document.getElementById("productShortDescription"),k=document.getElementById("productRating"),A=document.getElementById("variantsContainer"),T=document.getElementById("productDetailedDescription"),j=document.getElementById("stock"),q=document.getElementById("totalPrice"),Q=document.getElementById("relatedProducts"),U=async()=>{var r;const n=new URLSearchParams(window.location.search).get("id");try{const e=N(_,"collections","products","items",n),u=await F(e);if(u.exists()){const t=u.data();let a=t.variants[0].id;document.title=`Product | ${t.name}`,I&&(I.textContent=t.category),C&&(C.textContent=t.name),S&&(S.textContent=t.shortDescription),k&&(k.textContent=`${t.rating} Ratings`),A&&A.append(O(t));const c=document.querySelectorAll(".varient-button");if(t.variants.length>0&&t.variants[0].images.length>0){const o=(r=t.variants[0].images)==null?void 0:r.map(l=>`
                    <li class="splide__slide mb-0">
                        <img src="${l}" alt="${t.name}" class="d-block img-fluid mx-auto" />
                    </li>
                `).join("");P.innerHTML=o,w.innerHTML=o}requestAnimationFrame(()=>E(x,L)),c.length>0&&c[0].classList.add("active"),c==null||c.forEach(o=>{o.addEventListener("click",()=>{var m;c.forEach(d=>d.classList.remove("active")),o.classList.add("active");const l=o.getAttribute("data-varient-id");a!==l&&(a=l,(m=t.variants)==null||m.forEach(d=>{var p;if(d.id===l){const i=(p=d.images)==null?void 0:p.map(g=>`<li class="splide__slide mb-0"><img src="${g}" alt="${t.name}" class="d-block img-fluid mx-auto" /></li>`).join("");P.innerHTML=i,w.innerHTML=i,requestAnimationFrame(()=>E(x,L))}}))})}),T&&T.insertAdjacentHTML("beforeend",`
                <p>${t.detailedDescription}</p>
                <ul class="list-inline">
                    ${Object.keys(t.specifications).map(o=>`
                            <li class="d-flex align-items-center gap-2">
                                <span class="d-block">${o}: </span>
                                <span class="d-block fw-semibold">${t.specifications[o]}</span>
                            </li>
                        `).join("")}
                </ul>
            `),j&&(j.textContent=t.inStock),q&&(q.textContent=`â‚¹ ${t.price.current}.00`),z(t.id,t.category,Q)}else console.log("No such Product Found!")}catch(e){console.log(e)}};U();
