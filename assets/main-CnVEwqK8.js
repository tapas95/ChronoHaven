import{c as E,d as C,q as k,w,g as T}from"./firebase-config-C_Yz0m2T.js";import{u as j}from"./header-0P7B0Tyh.js";import{d as l}from"./alert-DsZaPul3.js";import{r as q,a as x,b as $,S as H}from"./addToCart-C7-cc1Bd.js";const I=(e,o)=>{const d=typeof e=="string"?document.querySelector(e):e;if(!d)return;const a=()=>`
        <div class="col">
            <div class="category-content">
                <span class="placeholder category-icon d-block mb-3" style="height: 12.25rem;"></span>
                <span class="placeholder col-7" style="height: 1.125rem;"></span>
            </div>
        </div>
    `,n=document.createElement("div");n.className="row d-flex px-0 mx-0",n.id="categoryCardSkeleton";for(let s=0;s<o;s++)n.insertAdjacentHTML("beforeend",a());d.appendChild(n)},M=async e=>{q(e,3);try{const o=E(C,"collections","products","items"),d=k(o,w("isFeatured","==",!0)),a=await T(d);if(a.empty){e.insertAdjacentHTML("beforeend",l("No Products Found.","danger"));return}a.forEach(n=>{const s=n.data();e.insertAdjacentHTML("beforeend",x(s))}),requestAnimationFrame(()=>{const n=document.querySelectorAll(".variant-images"),s=document.querySelectorAll(".product-title"),v=document.querySelectorAll(".add-to-cart");v.forEach(t=>{t.addEventListener("click",u=>{u.preventDefault(),document.querySelectorAll(".alert").forEach(r=>r.remove()),t.disabled=!0,t.insertAdjacentHTML("beforeend",'<div class="spinner-border spinner-border-sm text-light" role="status"><span class="visually-hidden">Loading...</span></div>');const p=t.getAttribute("data-product-id"),i=t.getAttribute("data-variant-id");p&&i?$(p,i,1).then(r=>{r==="ADDED"?(t.parentElement.insertAdjacentHTML("afterend",l("Product Added To Cart","success","bi-check-circle-fill","fs-xs")),j()):r==="EXISTS"&&t.parentElement.insertAdjacentHTML("afterend",l("Product Already Exist","danger","bi-exclamation-diamond-fill","fs-xs"))}).catch(r=>{console.log("Failed to add to cart",r)}).finally(()=>{t.disabled=!1;const r=t.querySelector(".spinner-border");r&&r.remove()}):console.warn("Product or Variant ID missing")})}),n.forEach((t,u)=>{var r;new H(t,{perPage:1,arrows:!1,pagination:!0,drag:!1}).mount();const i=(r=a.docs[u])==null?void 0:r.data();if(!i||!i.variants)return;const S=t.querySelectorAll(".splide__pagination__page");i.variants.forEach((c,P)=>{const m=S[P];if(!m||!c.colors)return;const L=c.colors.map(f=>c.colors.length>1?`${f} ${100/c.colors.length}%`:f).join(", ");m.style.cssText=`
                        --variant-base-color: ${c.colors[0]};
                        background-image: linear-gradient( -45deg, ${L} );
                        box-shadow: 0 0 0 0.125rem ${c.colors[0]};
                    `,m.setAttribute("data-variant-id",`${c.id}`),m.addEventListener("click",()=>{const f=c.id,y=s[u],A=v[u];if(!y||!A)return;const h=new URL(y.href,window.location.origin);h.searchParams.delete("variantId"),h.searchParams.append("variantId",f),y.href=h.toString(),A.setAttribute("data-variant-id",`${f}`)})})})})}catch(o){console.log(o),e.insertAdjacentHTML("beforeend",l("Error Loading Products.","danger"))}finally{const o=document.getElementById("productCardSkeleton");o&&o.remove()}},g=document.getElementById("categories"),B=async()=>{I(g,5);try{const e=E(C,"collections","categories","items"),o=await T(e);o.empty&&g.insertAdjacentHTML("beforeend",l("No categories found.","danger")),o.forEach(d=>{const a=d.data(),n=`
                <div class="col" id="${a.id}">
                    <div class="category-content">
                        <a href="javascript: void(0);" class="category-icon d-block bg-light px-4 py-5 mb-3 transition-3">
                            <img src="${a.icon}" alt="${a.name}" class="img-fluid" />
                        </a>
                        <p class="fs-md fw-semibold"><a href="javascript: void(0);">${a.name}</a></p>
                    </div>
                </div>
            `;g&&g.insertAdjacentHTML("beforeend",n)})}catch(e){console.log("Error fetching categories:",e.code||e.message),g.insertAdjacentHTML("beforeend",l("Error loading categories.","danger"))}finally{const e=document.getElementById("categoryCardSkeleton");e&&e.remove()}};B();const b=document.getElementById("featuredProducts");b&&M(b);
